<view class="loading-mask" hidden="{{mask}}">
  <view class="box">
    <view class="loader"></view>
  </view>
</view>
<view class="modal-mask {{modalHidden?'wrap-hidden':'wrap-show'}}">
  <view class="modal-wrap">
    <view class="modal-header">取消预约
      <image bindtap="close" src="http://p1ctmsz1g.bkt.clouddn.com/delete.jpg"></image>
    </view>
    <view class="modal-body">
      <view class="modal-tip">
        <view>您确认要取消预约吗？</view>
        <view>取消预约后可以在历史预约中查看详情</view>
      </view>
    </view>
    <view class="modal-button">
      <button class="submit-btn" bindtap="confirmCancel">确认取消</button>
    </view>
  </view>
</view>
<view class="reservation-detail">
  <view class="detail-header">
      <view class="detail-title">预约详情</view>
      <view class="state">
        <image wx:if="{{reservation.state == '已成功' || reservation.state == '待审核'}}" src="http://p1ctmsz1g.bkt.clouddn.com/3.png"></image>
        <image wx:if="{{reservation.state == '已取消' || reservation.state == '已拒绝' || reservation.state == '已过期'}}" src="http://p1ctmsz1g.bkt.clouddn.com/cancel.png"></image>
        <text>{{reservation.state}}</text>
      </view>
      <text class="name">{{reservation.project_name}}</text>
  </view>
  <view class="detail-body">
     <view class="detail-user">
      <view class="user-information">
        <text class="grid-name">姓名</text>
        <text>{{reservation.name}}</text>
      </view>
      <view class="user-information">
        <text class="grid-name">手机号码</text>
        <text>{{reservation.tel}}</text>
      </view>
      <view class="detail-datetime user-information">
        <text class="grid-name">预约时间</text>
        <view>
          <view wx:for="{{reservation.time}}">
            <text class="date">{{reservation.date}}</text>
            <text class="time">{{item}}</text>
          </view>
        </view>
      </view>
      <view class="user-information" wx:if="{{reservation.state === '已取消'}}">
        <text class="grid-name">取消时间</text>
        <text>{{update_time}}</text>
      </view>
      <view class="user-information" wx:if="{{reservation.state === '已拒绝'}}">
        <text class="detail-cancelMessage grid-name">拒绝意见</text>
        <text>{{reservation.remark}}</text>
      </view>
      <view class="user-information" wx:elif="{{reservation.state === '已取消' && reservation.remark}}">
        <text class="detail-cancelMessage grid-name">取消意见</text>
        <text class="cancelRemark">{{reservation.remark}}</text>
      </view>
    </view>
  </view>
  <view class="detail-address" bindtap="openMap">
    <image class="address-icon" src="http://p1ctmsz1g.bkt.clouddn.com/blueLocate.png"></image>
    <text>{{reservation.address}}</text>
    <image class="address-more" src="http://p1ctmsz1g.bkt.clouddn.com/blueMore.png"></image>
  </view>
</view>
<view class="detail-footer">
  <button class="submit-btn" hidden="{{orderCancel}}" bindtap="orderCancel">取消预约</button>
  <text class="warning-text block-text" wx:if="{{open}}">该预约已暂停</text>
  <button class="submit-btn" hidden="{{orderAgain}}" disabled="{{canOrder}}" bindtap="orderAgain">再次预约</button>
</view>